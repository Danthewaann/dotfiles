#!/bin/bash

set -e

if [[ ! -f .git ]]; then
    >&2 echo "Must be in a git repo"
    exit 1
fi

current_dir=$(pwd)

cd ..

>&2 echo
if [[ -d main ]]; then
    >&2 echo "Entering main"
    cd main || exit
elif [[ -d master ]]; then
    >&2 echo "Entering master"
    cd master || exit
else
    >&2 echo "main or master worktree not found"
    cd "$current_dir" || exit
    exit 1
fi

>&2 echo "Updating with remote"
git pull

cd "$current_dir" || exit

