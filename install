#!/usr/bin/env bash
#
# Run all installers.

set -e

SCRIPT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )

source "$SCRIPT_DIR"/common

# find all installers and run them iteratively
installers=()
while IFS=" " read -r line; do installers+=("$line"); done < <(find . -name install.sh)

echo ''

info "running installers : output logged to $LOG_FILE"
for installer in "${installers[@]}"; do
    info "running installer $installer"
    echo '' 
    if ! sh -c "$installer" | installer_info 2>&1 | tee -a "$LOG_FILE"; then
        echo ''
        fail "failed to run installer $installer"
    else
        echo ''
        success "finished installer $installer"
    fi
done

echo ''
echo 'All installed!'

